(function(){!function(t){var e,n,o,i;return n=t.document,!location.hash&&t.addEventListener?(window.scrollTo(0,1),i=1,o=function(){return t.pageYOffset||"CSS1Compat"===n.compatMode&&n.documentElement.scrollTop||n.body.scrollTop||0},e=setInterval(function(){return n.body?(clearInterval(e),i=o(),t.scrollTo(0,1===i?0:1)):void 0},15),t.addEventListener("load",function(){return setTimeout(function(){return o()<20?t.scrollTo(0,1===i?0:1):void 0},0)})):void 0}(this)}).call(this),!window.addEventListener&&function(t,e,n,o,i,r,a){t[o]=e[o]=n[o]=function(t,e){var n=this;a.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,a[0][3])},t[i]=e[i]=n[i]=function(t,e){for(var n,o=0;n=a[o];++o)if(n[0]==this&&n[1]==t&&n[2]==e)return this.detachEvent("on"+t,a.splice(o,1)[0][3])},t[r]=e[r]=n[r]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),function(){var t;(t=document.getElementById("embed-code"))&&t.addEventListener("click",function(e){var n,o;if(n=t.getAttribute("data-clipboard-text"))return o=t.getAttribute("title"),window.prompt(o,decodeURI(n)),e.preventDefault()})}.call(this),function(){function t(t){if(o)return o[t];var e=document.cookie.split("; ");o={};for(var n,i=e.length-1;i>=0;i--)n=e[i].split("="),o[n[0]]=decodeURIComponent(n[1]);return o[t]}function e(t,e,n){var i=new Date;i.setDate(i.getDate()+n);var r=escape(e)+(null==n?"":"; expires="+i.toUTCString());document.cookie=t+"="+r,o=null}function n(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",o=null}var o;window.readCookie=t,window.writeCookie=e,window.deleteCookie=n}(),function(){var t,e,n,o;try{e=JSON.parse(readCookie("cookied-flash"))}catch(i){}for(n in e)o=e[n],(t=document.getElementById("flash-"+n+"-message"))&&(o=decodeURI(o).replace(/\+/g," "),t.innerHTML=o,document.getElementsByTagName("body")[0].className+=" has-flash");deleteCookie("cookied-flash")}.call(this),function(){window.searchToHash=function(){var t,e,n,o,i,r,a,s,l;for(i=location.search.replace(/^\?/,""),n={},l=function(){var e,n,a,s,l;for(a=i.split(/&/),l=[],e=0,n=a.length;n>e;e++)o=a[e],l.push((s=o.split(/\=/),t=s[0],r=s[1],s));return l}(),a=0,s=l.length;s>a;a++)e=l[a],n[e[0]]=e[1];return n}}.call(this),function(){var t,e,n,o;(t=document.getElementById("freshness-timestamp"))&&(e=new Date(t.getAttribute("datetime")),n=function(){var t,e,n,o,i;return i=this.seconds,n=this.minutes,e=this.hours,t=this.days,o=this.months,0===n?"Just now!":1===n?"A minute ago":45>n?""+n+" minutes ago":90>n?"~1 hour ago":1440>n?""+e+" hours ago":2880>n?"Yesterday":43200>n?""+t+" days ago":86400>n?"Last month":525960>n?""+o+" months ago":void 0},o=function(){var o,i,r;return r=Math.max(0,Math.floor((new Date-e)/1e3)),o={seconds:r,minutes:Math.floor(r/60),hours:Math.floor(r/3600),days:Math.floor(r/86400),months:Math.floor(r/2628e3)},i=n.call(o),t.innerHTML=i},setInterval(o,6e3),o())}.call(this),function(){window.getOffset=function(t){var e,n;if(e=n=0,t.offsetParent)for(e=t.offsetLeft,n=t.offsetTop;t=t.offsetParent;)e+=t.offsetLeft,n+=t.offsetTop;return{left:e,top:n}}}.call(this),function(){var t,e,n,o,i,r;(e=document.getElementById("quick_buy"))&&(r=document.getElementById("buy-now-button"))&&(n=/visible/.test(e.className),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"},o=i[Modernizr.prefixed("transition")],e.addEventListener(o,function(t){var n;if(t.target===e)return/visible/.test(t.target.className)?void 0:null!=(n=t.target.style)?n.display="none":void 0}),t=function(){var t,o,i;return t=r.clientHeight+getOffset(r).top,o=t<window.scrollY,n!==o?(o&&null!=(i=e.style)&&(i.display="block"),setTimeout(function(){return e.className=o?""+e.className+" visible":e.className.replace(/(?:^|\s)visible(?!\S)/,"")},0),n=o):void 0},t(),window.addEventListener("scroll",t),Modernizr.touch&&window.addEventListener("touchmove",t))}.call(this),function(){var t,e,n,o,i,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};try{n=null!=(o=JSON.parse(readCookie("user-info")))?o.username:void 0}catch(a){return t=a,void 0}("undefined"!=typeof authorUsernames&&null!==authorUsernames&&r.call(authorUsernames,n)>=0||"undefined"!=typeof editorUsernames&&null!==editorUsernames&&r.call(editorUsernames,n)>=0)&&(e=document.getElementById("edit-book"),null!=e&&null!=(i=e.style)&&(i.display="block"))}.call(this),function(){}.call(this);